name: Contribution Art (JULIO)

on:
  workflow_dispatch:

jobs:
  draw:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Configure Git
        run: |
          git config user.name "Juliowiwiwiwi"
          git config user.email "csdevanarayan@gmail.com"

      - name: Create JULIO pattern commits
        run: |
          # YEAR = must be LAST YEAR because GitHub contribution graph only accepts past dates
          YEAR=$(date +"%Y")-1

          # Coordinates to draw "JULIO" as green boxes
          declare -a POINTS=(
            "0,0" "1,0" "2,0" "3,0" "4,0"
            "4,1"
            "4,2"
            "0,3" "1,3" "2,3" "3,3" "4,3"

            "6,0" "6,1" "6,2" "6,3"
            "7,0"
            "8,0"
            "9,0" "9,1" "9,2" "9,3"

            "11,0" "12,0" "13,0" "14,0"
            "11,1"
            "11,2"
            "11,3"
            "12,3" "13,3" "14,3"

            "16,0" "16,1" "16,2" "16,3"

            "18,0" "19,0" "20,0" "21,0"
            "21,1"
            "21,2"
            "18,3" "19,3" "20,3" "21,3"
          )

          for p in "${POINTS[@]}"; do
            X=${p%,*}
            Y=${p#*,}
            DATE=$(date -d "$YEAR-01-01 + $((X*7 + Y)) days" +"%Y-%m-%d")
            echo "$DATE" > art.txt
            git add art.txt
            GIT_AUTHOR_DATE="$DATE 12:00:00" GIT_COMMITTER_DATE="$DATE 12:00:00" \
              git commit -m "Pixel at $p"
          done

      - name: Push
        run: |
          git push origin main --force
